"use strict";(self["webpackChunkparkinghub_v1_0"]=self["webpackChunkparkinghub_v1_0"]||[]).push([[183],{183:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var a=t(3396),o=t(9242),d=t(7139);const r=e=>((0,a.dD)("data-v-5aeed7c0"),e=e(),(0,a.Cn)(),e),l={class:"container"},u=r((()=>(0,a._)("h1",null,"Models",-1))),c={class:"input-section"},s={class:"models-table"},i=r((()=>(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"Brand Name"),(0,a._)("th",null,"Model Name"),(0,a._)("th",null,"Actions")])],-1))),m=["onClick"],p=["onClick"];function b(e,n,t,r,b,v){return(0,a.wg)(),(0,a.iD)("div",l,[u,(0,a._)("div",c,[(0,a.wy)((0,a._)("input",{class:"brand-input","onUpdate:modelValue":n[0]||(n[0]=n=>e.newBrandName=n),placeholder:"Brand Name"},null,512),[[o.nr,e.newBrandName]]),(0,a.wy)((0,a._)("input",{class:"model-input","onUpdate:modelValue":n[1]||(n[1]=n=>e.newModelName=n),placeholder:"Model Name"},null,512),[[o.nr,e.newModelName]]),(0,a._)("button",{onClick:n[2]||(n[2]=(...n)=>e.createModel&&e.createModel(...n)),class:"add-button"},"Add Model")]),(0,a._)("table",s,[i,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.models,(n=>((0,a.wg)(),(0,a.iD)("tr",{key:n.id},[(0,a._)("td",null,(0,d.zw)(n.brand?n.brand.name:"Marca não definida"),1),(0,a._)("td",null,(0,d.zw)(n.name),1),(0,a._)("td",null,[(0,a._)("button",{onClick:t=>e.updateModelInDB(n.id),class:"action-button"},"Update",8,m),(0,a._)("button",{onClick:t=>e.deleteModelFromDB(n.id),class:"action-button"},"Delete",8,p)])])))),128))])])])}var v=t(4870),_=(0,a.aZ)({setup(){const e=(0,v.iH)(""),n=(0,v.iH)(""),t=(0,v.iH)([]);let o;const d=window.indexedDB.open("movementDatabase",1);d.onupgradeneeded=function(e){if(o=e.target.result,o){const e=o.createObjectStore("models",{keyPath:"id",autoIncrement:!0});e.createIndex("name","name",{unique:!1}),e.createIndex("register","register",{unique:!1}),e.createIndex("update","update",{unique:!1}),e.createIndex("active","active",{unique:!1})}},d.onsuccess=function(e){o=e.target.result,c()};const r=(e,n)=>{if(!o)return;const t=o.transaction(["models"],"readwrite"),a=t.objectStore("models"),d=(new Date).toLocaleTimeString(),r={brand:e,name:n,register:d,update:null,active:!0};a.add(r),c()},l=e=>{if(!o)return;const n=o.transaction(["models"],"readwrite"),t=n.objectStore("models"),a=t.get(e);a.onsuccess=function(){const e=a.result,n=prompt("Enter the updated brand name:",e.brand),o=prompt("Enter the updated model name:",e.name);n&&o&&(e.brand=n,e.name=o,e.update=new Date,t.put(e),c())}},u=e=>{if(!o)return;const n=o.transaction(["models"],"readwrite"),t=n.objectStore("models");t.delete(e),c()},c=()=>{if(!o)return;const e=o.transaction(["models"],"readonly"),n=e.objectStore("models"),a=n.getAll();a.onsuccess=function(e){t.value=e.target.result}},s=()=>{if(""===e.value.trim()||""===n.value.trim())return;const t=o.transaction(["brands"],"readonly"),a=t.objectStore("brands"),d=a.index("name"),l=d.get(e.value);l.onsuccess=function(t){const a=t.target.result;a?(r(a,n.value),e.value="",n.value=""):alert("Marca não encontrada. Por favor, insira um nome de marca válido.")}};return(0,a.bv)(c),{newBrandName:e,newModelName:n,models:t,createModel:s,updateModelInDB:l,deleteModelFromDB:u}}}),w=t(89);const f=(0,w.Z)(_,[["render",b],["__scopeId","data-v-5aeed7c0"]]);var g=f}}]);
//# sourceMappingURL=183.df40949a.js.map